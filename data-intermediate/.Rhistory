a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# when you use usual hours, 2% less variation is explained by hours, but this is largely because there is less variation to explain
asec[, hrs := uslhrs]
asec[, wage := hrearn]
asec[is.na(hrearn), wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# asec[paidhre == 'No', wage := earnwke / hourslw]
# another option is to use weekly wages
asec[, wage := wkearn / hrs]
asec[is.na(wage) & paidhre == 'Yes', wage := hrearn]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# then compare annual earnings
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$annu.earn <- log(asec$wage * asec$hrs * asec$wkswork)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(annu.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "annual earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
par(mar=c(2,4,2,0))
# keep lower nonreport rate: hours last week
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[is.na(hrearn) & paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# when you use usual hours, 2% less variation is explained by hours, but this is largely because there is less variation to explain
asec[, hrs := uslhrs]
asec[, wage := hrearn]
asec[is.na(hrearn), wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# asec[paidhre == 'No', wage := earnwke / hourslw]
# another option is to use weekly wages
asec[, wage := wkearn / hrs]
asec[is.na(wage) & paidhre == 'Yes', wage := hrearn]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# then compare annual earnings
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$annu.earn <- log(asec$wage * asec$hrs * asec$wkswork)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(annu.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "annual earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
par(mar=c(2,4,0,0))
# keep lower nonreport rate: hours last week
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[is.na(hrearn) & paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# when you use usual hours, 2% less variation is explained by hours, but this is largely because there is less variation to explain
asec[, hrs := uslhrs]
asec[, wage := hrearn]
asec[is.na(hrearn), wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# asec[paidhre == 'No', wage := earnwke / hourslw]
# another option is to use weekly wages
asec[, wage := wkearn / hrs]
asec[is.na(wage) & paidhre == 'Yes', wage := hrearn]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# then compare annual earnings
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$annu.earn <- log(asec$wage * asec$hrs * asec$wkswork)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(annu.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "annual earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
par(mar=c(0,4,0,0))
# keep lower nonreport rate: hours last week
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[is.na(hrearn) & paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# when you use usual hours, 2% less variation is explained by hours, but this is largely because there is less variation to explain
asec[, hrs := uslhrs]
asec[, wage := hrearn]
asec[is.na(hrearn), wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# asec[paidhre == 'No', wage := earnwke / hourslw]
# another option is to use weekly wages
asec[, wage := wkearn / hrs]
asec[is.na(wage) & paidhre == 'Yes', wage := hrearn]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# then compare annual earnings
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$annu.earn <- log(asec$wage * asec$hrs * asec$wkswork)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(annu.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "annual earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
par(mar=c(2,4,0,0))
# keep lower nonreport rate: hours last week
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[is.na(hrearn) & paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# when you use usual hours, 2% less variation is explained by hours, but this is largely because there is less variation to explain
asec[, hrs := uslhrs]
asec[, wage := hrearn]
asec[is.na(hrearn), wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# asec[paidhre == 'No', wage := earnwke / hourslw]
# another option is to use weekly wages
asec[, wage := wkearn / hrs]
asec[is.na(wage) & paidhre == 'Yes', wage := hrearn]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# then compare annual earnings
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$annu.earn <- log(asec$wage * asec$hrs * asec$wkswork)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(annu.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "annual earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
axes = F
# keep lower nonreport rate: hours last week
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[is.na(hrearn) & paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# when you use usual hours, 2% less variation is explained by hours, but this is largely because there is less variation to explain
asec[, hrs := uslhrs]
asec[, wage := hrearn]
asec[is.na(hrearn), wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# asec[paidhre == 'No', wage := earnwke / hourslw]
# another option is to use weekly wages
asec[, wage := wkearn / hrs]
asec[is.na(wage) & paidhre == 'Yes', wage := hrearn]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# then compare annual earnings
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$annu.earn <- log(asec$wage * asec$hrs * asec$wkswork)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(annu.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "annual earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
par(mfrow = c(2,2))
xlim <- c(-.35, .35)
ylim <- c(-.35, .35)
par(mar = c(0,4,2,0))
# keep lower nonreport rate: hours last week
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[is.na(hrearn) & paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim, axes = F)
axis(side = 2, labels = T)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
par(mar = c(0,0,2,2))
# when you use usual hours, 2% less variation is explained by hours, but this is largely because there is less variation to explain
asec[, hrs := uslhrs]
asec[, wage := hrearn]
asec[is.na(hrearn), wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
# asec[paidhre == 'No', wage := earnwke / hourslw]
par(mar = c(0,4,0,4))
# another option is to use weekly wages
asec[, wage := wkearn / hrs]
asec[is.na(wage) & paidhre == 'Yes', wage := hrearn]
asec$hrly.earn <- log(asec$wage)
asec$wkly.earn <- log(asec$wage * asec$hrs)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(wkly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "weekly earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
par(mar = c(0,0,2,4))
# then compare annual earnings
asec[, hrs := hrslw]
asec[, wage := hrearn]
asec[paidhre == 'No', wage := wkearn/hrs]
asec$hrly.earn <- log(asec$wage)
asec$annu.earn <- log(asec$wage * asec$hrs * asec$wkswork)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(annu.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "annual earnings", ylim = ylim, xlim = xlim)
abline(lm(b~a), col = 'gray')
text(min(a)+.05, max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
?signif
cbind(plyr::ddply(asec, ~sector, summarize,
`$\\bar{w}_u$`= round(mean(wkswork, na.rm = T),1),
`$\\sigma$`=round(sd(wkswork, na.rm = T),1))) %>%
knitr::kable(caption = "Weeks worked per year by industry.")
cbind(plyr::ddply(asec, ~sector, summarize,
`$\\bar{w}_u$`= round(mean(wkswork, na.rm = T),1),
`$\\sigma$`=round(sd(wkswork, na.rm = T),1)))[-21] %>%
knitr::kable(caption = "Weeks worked per year by industry.")
cbind(plyr::ddply(asec, ~sector, summarize,
`$\\bar{w}_u$`= round(mean(wkswork, na.rm = T),1),
`$\\sigma$`=round(sd(wkswork, na.rm = T),1)))[-21] %>%
knitr::kable(caption = "Weeks worked per year by industry.")
cbind(plyr::ddply(asec, ~sector, summarize,
`$\\bar{w}_u$`= round(mean(wkswork, na.rm = T),1),
`$\\sigma$`=round(sd(wkswork, na.rm = T),1)))[-21,] %>%
knitr::kable(caption = "Weeks worked per year by industry.")
length(sector.names)
length(2:20)
a <- lm(hrly.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
a <- a$coefficients[2:20]
b <- lm(annu.earn ~ sector + educ + exp^4 + sex + region + race + exp^4*educ, data = asec, weights = ernlwt*hrs)
b <- b$coefficients[2:20]
plot(a, b, xlab = "hourly earnings", ylab = "annual earnings", ylim = ylim, xlim = xlim, yaxt = "n")
abline(lm(b~a), col = 'gray')
text(min(a), max(b), round(1 - summary(lm(a ~ b))$r.squared,3))
secLabels(a,b)
sector.names
length(a)
length(b)
length(sector.names)
?switch
?xaxt
/par
?par
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
w = c(2,2,1)
v = c(1,2,2)
h = c(2,1,2)
ln(w~c+v)
lm(w~c+v)
lm(w~h+v)
w = c(2,2)
v = c(2,1)
h = c(1,2)
lm(w~h+v)
build
build <- commandArgs(TRUE)[1]
cat("Commencing", build, "R package installations.\n")
if (build == "RCC"){
## Set-up RCC Environment when "RCC" is specified as a command line argument
setwd('~')
unlink('R_libs/*', recursive = TRUE)
unlink('R-dev/*', recursive = TRUE)
}
source('~/Downloads/initialize_env.R', echo=TRUE)
source('~/gdrive/oes_impute.R', echo=TRUE)
list.files('~/R/x86_64-pc-linux-gnu-library/3.3/acepack/')
list.files('~/R/x86_64-pc-linux-gnu-library/3.3/')
source('~/Documents/2fpm/inputs/kerneling.R', echo=TRUE)
setwd('~/Documents/2fpm')
source('~/Documents/2fpm/inputs/kerneling.R', echo=TRUE)
setwd('~/Documents/2fpm/data-intermediate')
source('~/Documents/2fpm/inputs/kerneling.R', echo=TRUE)
col2rgb
col2rgb('lightgray')
ylim <- c(0.1, 0.35)  # for earnings poverty
ylim <- c(0.1, 0.16)  # for simple FPM
plot(stepfun(2000:2015, c(poverty)), ylab = 'poverty rate', xlab = 'year',
ylim = ylim, xlim = c(1998, 2018), main = 'frequent poverty rate')
lines(stepfun(2000:2015, official.poverty / 100), col = 'red')
# draw gray boundary that is 2*(standard deviation) from mean of simulation
time  <- seq(1999, 2017, length.out = 217)[1:length(monthly.poverty)]
edges <- c(monthly.poverty + 2*monthly.poverty.sd, rev(monthly.poverty - 2*monthly.poverty.sd))
drop.end <- which(is.na(edges))
polygon(c(time, rev(time))[-drop.end], edges[-drop.end], col = rgb(211,211,211,0.5), border = F)
lines(time, monthly.poverty, col = 'blue')
lines(time, earnings.poverty, col = 'green')
rgb
polygon(c(time, rev(time))[-drop.end], edges[-drop.end], col = rgb(211,211,211,0.5, maxColorValue=255), border = F)
ylim <- c(0.1, 0.35)  # for earnings poverty
ylim <- c(0.1, 0.16)  # for simple FPM
plot(stepfun(2000:2015, c(poverty)), ylab = 'poverty rate', xlab = 'year',
ylim = ylim, xlim = c(1998, 2018), main = 'frequent poverty rate')
lines(stepfun(2000:2015, official.poverty / 100), col = 'red')
# draw gray boundary that is 2*(standard deviation) from mean of simulation
time  <- seq(1999, 2017, length.out = 217)[1:length(monthly.poverty)]
edges <- c(monthly.poverty + 2*monthly.poverty.sd, rev(monthly.poverty - 2*monthly.poverty.sd))
drop.end <- which(is.na(edges))
polygon(c(time, rev(time))[-drop.end], edges[-drop.end], col = rgb(211,211,211,0.5, maxColorValue=255), border = F)
lines(time, monthly.poverty, col = 'blue')
lines(time, earnings.poverty, col = 'green')
ylim <- c(0.1, 0.35)  # for earnings poverty
ylim <- c(0.1, 0.16)  # for simple FPM
plot(stepfun(2000:2015, c(poverty)), ylab = 'poverty rate', xlab = 'year',
ylim = ylim, xlim = c(1998, 2018), main = 'frequent poverty rate')
lines(stepfun(2000:2015, official.poverty / 100), col = 'red')
# draw gray boundary that is 2*(standard deviation) from mean of simulation
time  <- seq(1999, 2017, length.out = 217)[1:length(monthly.poverty)]
edges <- c(monthly.poverty + 2*monthly.poverty.sd, rev(monthly.poverty - 2*monthly.poverty.sd))
drop.end <- which(is.na(edges))
polygon(c(time, rev(time))[-drop.end], edges[-drop.end], col = rgb(211,211,211,0.1, maxColorValue=255), border = F)
lines(time, monthly.poverty, col = 'blue')
lines(time, earnings.poverty, col = 'green')
